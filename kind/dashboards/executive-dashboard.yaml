apiVersion: v1
kind: ConfigMap
metadata:
  name: executive-dashboard
  namespace: monitoring
  labels:
    grafana_dashboard: "1"
data:
  executive-dashboard.json: |
    {
      "annotations": {
        "list": [
          {
            "builtIn": 1,
            "datasource": {
              "type": "grafana",
              "uid": "-- Grafana --"
            },
            "enable": true,
            "hide": true,
            "iconColor": "rgba(0, 211, 255, 1)",
            "name": "Annotations & Alerts",
            "type": "dashboard"
          }
        ]
      },
      "description": "High-level business and reliability view for executive stakeholders. Powered by OpenTelemetry (SDK + Beyla eBPF).",
      "editable": true,
      "fiscalYearStartMonth": 0,
      "graphTooltip": 1,
      "id": null,
      "links": [
        {
          "asDropdown": true,
          "icon": "external link",
          "includeVars": false,
          "keepTime": true,
          "tags": [],
          "targetBlank": false,
          "title": "Navigate",
          "tooltip": "",
          "type": "dashboards",
          "url": ""
        }
      ],
      "liveNow": true,
      "panels": [
        {
          "gridPos": { "h": 2, "w": 24, "x": 0, "y": 0 },
          "id": 50,
          "options": {
            "code": { "language": "markdown", "showLineNumbers": false, "showMiniMap": false },
            "content": "<div style=\"display:flex;align-items:center;gap:16px;padding:4px 0\">\n  <span style=\"font-size:28px;font-weight:700;color:#fff\">Platform Reliability Report</span>\n  <span style=\"font-size:14px;color:#8e8e8e;margin-left:auto\">OpenTelemetry PoC &mdash; SDK + Beyla eBPF &mdash; Metrics | Logs | Traces</span>\n</div>",
            "mode": "html"
          },
          "transparent": true,
          "type": "text"
        },
        {
          "collapsed": false,
          "gridPos": { "h": 1, "w": 24, "x": 0, "y": 2 },
          "id": 100,
          "panels": [],
          "title": "Key Performance Indicators",
          "type": "row"
        },
        {
          "datasource": { "type": "prometheus", "uid": "Prometheus" },
          "description": "Total HTTP requests per second across all services (SDK + Beyla)",
          "fieldConfig": {
            "defaults": {
              "color": { "fixedColor": "#37872D", "mode": "fixed" },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "green", "value": null }
                ]
              },
              "unit": "reqps"
            },
            "overrides": []
          },
          "gridPos": { "h": 5, "w": 4, "x": 0, "y": 3 },
          "id": 101,
          "options": {
            "colorMode": "background",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "auto",
            "reduceOptions": { "values": false, "calcs": ["lastNotNull"], "fields": "" },
            "text": {},
            "textMode": "value_and_name"
          },
          "targets": [
            {
              "datasource": { "type": "prometheus", "uid": "Prometheus" },
              "expr": "sum(rate(http_requests_total[5m])) + sum(rate(http_server_request_duration_seconds_count[5m]))",
              "legendFormat": "Total Throughput",
              "refId": "A"
            }
          ],
          "title": "Total Throughput",
          "type": "stat"
        },
        {
          "datasource": { "type": "prometheus", "uid": "Prometheus" },
          "description": "Platform-wide availability based on successful HTTP responses (SDK + Beyla)",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "thresholds" },
              "decimals": 3,
              "mappings": [],
              "max": 100,
              "min": 95,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "red", "value": null },
                  { "color": "orange", "value": 99 },
                  { "color": "#EAB839", "value": 99.5 },
                  { "color": "green", "value": 99.9 }
                ]
              },
              "unit": "percent"
            },
            "overrides": []
          },
          "gridPos": { "h": 5, "w": 4, "x": 4, "y": 3 },
          "id": 102,
          "options": {
            "colorMode": "background",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "auto",
            "reduceOptions": { "values": false, "calcs": ["lastNotNull"], "fields": "" },
            "text": {},
            "textMode": "value_and_name"
          },
          "targets": [
            {
              "datasource": { "type": "prometheus", "uid": "Prometheus" },
              "expr": "(1 - ((sum(rate(http_requests_total{http_status_code=~\"5..\"}[30m])) + sum(rate(http_server_request_duration_seconds_count{http_response_status_code=~\"5..\"}[30m]))) / (sum(rate(http_requests_total[30m])) + sum(rate(http_server_request_duration_seconds_count[30m]))))) * 100",
              "legendFormat": "Availability",
              "refId": "A"
            }
          ],
          "title": "Platform Availability",
          "type": "stat"
        },
        {
          "datasource": { "type": "prometheus", "uid": "Prometheus" },
          "description": "Overall error rate for 5xx responses across all services (SDK + Beyla)",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "thresholds" },
              "decimals": 2,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "green", "value": null },
                  { "color": "#EAB839", "value": 1 },
                  { "color": "orange", "value": 3 },
                  { "color": "red", "value": 5 }
                ]
              },
              "unit": "percent"
            },
            "overrides": []
          },
          "gridPos": { "h": 5, "w": 4, "x": 8, "y": 3 },
          "id": 103,
          "options": {
            "colorMode": "background",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "auto",
            "reduceOptions": { "values": false, "calcs": ["lastNotNull"], "fields": "" },
            "text": {},
            "textMode": "value_and_name"
          },
          "targets": [
            {
              "datasource": { "type": "prometheus", "uid": "Prometheus" },
              "expr": "((sum(rate(http_requests_total{http_status_code=~\"5..\"}[5m])) + sum(rate(http_server_request_duration_seconds_count{http_response_status_code=~\"5..\"}[5m]))) / (sum(rate(http_requests_total[5m])) + sum(rate(http_server_request_duration_seconds_count[5m])))) * 100",
              "legendFormat": "Error Rate",
              "refId": "A"
            }
          ],
          "title": "Error Rate",
          "type": "stat"
        },
        {
          "datasource": { "type": "prometheus", "uid": "Prometheus" },
          "description": "95th percentile response latency across all services (SDK in ms + Beyla converted to ms)",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "thresholds" },
              "decimals": 0,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "green", "value": null },
                  { "color": "#EAB839", "value": 200 },
                  { "color": "orange", "value": 500 },
                  { "color": "red", "value": 1000 }
                ]
              },
              "unit": "ms"
            },
            "overrides": []
          },
          "gridPos": { "h": 5, "w": 4, "x": 12, "y": 3 },
          "id": 104,
          "options": {
            "colorMode": "background",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "auto",
            "reduceOptions": { "values": false, "calcs": ["max"], "fields": "" },
            "text": {},
            "textMode": "value_and_name"
          },
          "targets": [
            {
              "datasource": { "type": "prometheus", "uid": "Prometheus" },
              "expr": "histogram_quantile(0.95, sum(rate(http_server_duration_milliseconds_bucket[5m])) by (le))",
              "legendFormat": "P95 SDK",
              "refId": "A"
            },
            {
              "datasource": { "type": "prometheus", "uid": "Prometheus" },
              "expr": "histogram_quantile(0.95, sum(rate(http_server_request_duration_seconds_bucket[5m])) by (le)) * 1000",
              "legendFormat": "P95 Beyla",
              "refId": "B"
            }
          ],
          "title": "P95 Latency",
          "type": "stat"
        },
        {
          "datasource": { "type": "prometheus", "uid": "Prometheus" },
          "description": "Number of services reporting telemetry via OpenTelemetry (SDK + Beyla)",
          "fieldConfig": {
            "defaults": {
              "color": { "fixedColor": "#8F3BB8", "mode": "fixed" },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "#8F3BB8", "value": null }
                ]
              },
              "unit": "short"
            },
            "overrides": []
          },
          "gridPos": { "h": 5, "w": 4, "x": 16, "y": 3 },
          "id": 105,
          "options": {
            "colorMode": "background",
            "graphMode": "none",
            "justifyMode": "auto",
            "orientation": "auto",
            "reduceOptions": { "values": false, "calcs": ["lastNotNull"], "fields": "" },
            "text": {},
            "textMode": "value_and_name"
          },
          "targets": [
            {
              "datasource": { "type": "prometheus", "uid": "Prometheus" },
              "expr": "count(count by (service_name) (http_requests_total) or count by (service_name) (http_server_request_duration_seconds_count))",
              "legendFormat": "Active Services",
              "refId": "A"
            }
          ],
          "title": "Active Services",
          "type": "stat"
        },
        {
          "datasource": { "type": "prometheus", "uid": "Prometheus" },
          "description": "Total HTTP requests processed in the selected time window (SDK + Beyla)",
          "fieldConfig": {
            "defaults": {
              "color": { "fixedColor": "#1F60C4", "mode": "fixed" },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "#1F60C4", "value": null }
                ]
              },
              "unit": "short"
            },
            "overrides": []
          },
          "gridPos": { "h": 5, "w": 4, "x": 20, "y": 3 },
          "id": 106,
          "options": {
            "colorMode": "background",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "auto",
            "reduceOptions": { "values": false, "calcs": ["lastNotNull"], "fields": "" },
            "text": {},
            "textMode": "value_and_name"
          },
          "targets": [
            {
              "datasource": { "type": "prometheus", "uid": "Prometheus" },
              "expr": "sum(increase(http_requests_total[1h])) + sum(increase(http_server_request_duration_seconds_count[1h]))",
              "legendFormat": "Requests (1h)",
              "refId": "A"
            }
          ],
          "title": "Total Requests (1h)",
          "type": "stat"
        },
        {
          "collapsed": false,
          "gridPos": { "h": 1, "w": 24, "x": 0, "y": 8 },
          "id": 200,
          "panels": [],
          "title": "SLA / SLO Compliance",
          "type": "row"
        },
        {
          "datasource": { "type": "prometheus", "uid": "Prometheus" },
          "description": "Platform availability over last 30 minutes (Target: 99.9%) - includes SDK + Beyla services",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "thresholds" },
              "decimals": 3,
              "mappings": [],
              "max": 100,
              "min": 99,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "red", "value": null },
                  { "color": "orange", "value": 99 },
                  { "color": "#EAB839", "value": 99.5 },
                  { "color": "green", "value": 99.9 }
                ]
              },
              "unit": "percent"
            },
            "overrides": []
          },
          "gridPos": { "h": 7, "w": 8, "x": 0, "y": 9 },
          "id": 201,
          "options": {
            "orientation": "auto",
            "reduceOptions": { "values": false, "calcs": ["lastNotNull"], "fields": "" },
            "showThresholdLabels": true,
            "showThresholdMarkers": true,
            "text": { "valueSize": 40 }
          },
          "targets": [
            {
              "datasource": { "type": "prometheus", "uid": "Prometheus" },
              "expr": "(1 - ((sum(rate(http_requests_total{http_status_code=~\"5..\"}[30m])) + sum(rate(http_server_request_duration_seconds_count{http_response_status_code=~\"5..\"}[30m]))) / (sum(rate(http_requests_total[30m])) + sum(rate(http_server_request_duration_seconds_count[30m]))))) * 100",
              "refId": "A"
            }
          ],
          "title": "Availability SLA (Target: 99.9%)",
          "type": "gauge"
        },
        {
          "datasource": { "type": "prometheus", "uid": "Prometheus" },
          "description": "95th percentile latency SLO (Target: <500ms) - worst of SDK and Beyla",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "thresholds" },
              "decimals": 0,
              "mappings": [
                {
                  "options": {
                    "from": 0,
                    "result": { "color": "green", "index": 0, "text": "Within SLO" },
                    "to": 500
                  },
                  "type": "range"
                },
                {
                  "options": {
                    "from": 500,
                    "result": { "color": "red", "index": 1, "text": "SLO Violated" },
                    "to": 100000
                  },
                  "type": "range"
                }
              ],
              "max": 1000,
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "green", "value": null },
                  { "color": "red", "value": 500 }
                ]
              },
              "unit": "ms"
            },
            "overrides": []
          },
          "gridPos": { "h": 7, "w": 8, "x": 8, "y": 9 },
          "id": 202,
          "options": {
            "orientation": "auto",
            "reduceOptions": { "values": false, "calcs": ["max"], "fields": "" },
            "showThresholdLabels": true,
            "showThresholdMarkers": true,
            "text": { "valueSize": 32 }
          },
          "targets": [
            {
              "datasource": { "type": "prometheus", "uid": "Prometheus" },
              "expr": "histogram_quantile(0.95, sum(rate(http_server_duration_milliseconds_bucket[5m])) by (le))",
              "legendFormat": "P95 SDK (ms)",
              "refId": "A"
            },
            {
              "datasource": { "type": "prometheus", "uid": "Prometheus" },
              "expr": "histogram_quantile(0.95, sum(rate(http_server_request_duration_seconds_bucket[5m])) by (le)) * 1000",
              "legendFormat": "P95 Beyla (ms)",
              "refId": "B"
            }
          ],
          "title": "Latency SLO P95 (Target: <500ms)",
          "type": "gauge"
        },
        {
          "datasource": { "type": "prometheus", "uid": "Prometheus" },
          "description": "Remaining error budget for the current hour. Based on 0.1% error rate target. Includes SDK + Beyla services.",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "thresholds" },
              "decimals": 1,
              "mappings": [],
              "max": 100,
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "red", "value": null },
                  { "color": "orange", "value": 20 },
                  { "color": "#EAB839", "value": 50 },
                  { "color": "green", "value": 80 }
                ]
              },
              "unit": "percent"
            },
            "overrides": []
          },
          "gridPos": { "h": 7, "w": 8, "x": 16, "y": 9 },
          "id": 203,
          "options": {
            "orientation": "auto",
            "reduceOptions": { "values": false, "calcs": ["lastNotNull"], "fields": "" },
            "showThresholdLabels": false,
            "showThresholdMarkers": true,
            "text": { "valueSize": 40 }
          },
          "targets": [
            {
              "datasource": { "type": "prometheus", "uid": "Prometheus" },
              "expr": "clamp_min(100 - (((sum(rate(http_requests_total{http_status_code=~\"5..\"}[1h])) + sum(rate(http_server_request_duration_seconds_count{http_response_status_code=~\"5..\"}[1h]))) / (sum(rate(http_requests_total[1h])) + sum(rate(http_server_request_duration_seconds_count[1h])))) / 0.001) * 100, 0)",
              "refId": "A"
            }
          ],
          "title": "Error Budget Remaining (This Hour)",
          "type": "gauge"
        },
        {
          "collapsed": false,
          "gridPos": { "h": 1, "w": 24, "x": 0, "y": 16 },
          "id": 300,
          "panels": [],
          "title": "Service Health at a Glance",
          "type": "row"
        },
        {
          "datasource": { "type": "prometheus", "uid": "Prometheus" },
          "description": "Health score per service based on success rate (SDK + Beyla)",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "thresholds" },
              "custom": {
                "align": "center",
                "cellOptions": { "type": "color-background" },
                "inspect": false
              },
              "mappings": [
                {
                  "options": {
                    "from": 0,
                    "result": { "color": "red", "index": 0, "text": "CRITICAL" },
                    "to": 90
                  },
                  "type": "range"
                },
                {
                  "options": {
                    "from": 90,
                    "result": { "color": "#EAB839", "index": 1, "text": "DEGRADED" },
                    "to": 99
                  },
                  "type": "range"
                },
                {
                  "options": {
                    "from": 99,
                    "result": { "color": "green", "index": 2, "text": "HEALTHY" },
                    "to": 100.1
                  },
                  "type": "range"
                }
              ],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "red", "value": null },
                  { "color": "#EAB839", "value": 90 },
                  { "color": "green", "value": 99 }
                ]
              },
              "unit": "percent"
            },
            "overrides": []
          },
          "gridPos": { "h": 6, "w": 8, "x": 0, "y": 17 },
          "id": 301,
          "options": {
            "cellHeight": "md",
            "footer": { "fields": "", "reducer": ["sum"], "show": false },
            "showHeader": true,
            "sortBy": []
          },
          "targets": [
            {
              "datasource": { "type": "prometheus", "uid": "Prometheus" },
              "expr": "(1 - (sum by (service_name) (rate(http_requests_total{http_status_code=~\"5..\"}[5m])) / sum by (service_name) (rate(http_requests_total[5m])))) * 100 or (1 - (sum by (service_name) (rate(http_server_request_duration_seconds_count{http_response_status_code=~\"5..\"}[5m])) / sum by (service_name) (rate(http_server_request_duration_seconds_count[5m])))) * 100",
              "format": "table",
              "instant": true,
              "refId": "A"
            }
          ],
          "title": "Service Status Matrix",
          "transformations": [
            {
              "id": "organize",
              "options": {
                "excludeByName": { "Time": true },
                "renameByName": { "Value": "Health %", "service_name": "Service" }
              }
            }
          ],
          "type": "table"
        },
        {
          "datasource": { "type": "prometheus", "uid": "Prometheus" },
          "description": "Error rate trend per service over time (SDK + Beyla)",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "palette-classic" },
              "custom": {
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 30,
                "gradientMode": "opacity",
                "hideFrom": { "tooltip": false, "viz": false, "legend": false },
                "lineInterpolation": "smooth",
                "lineWidth": 2,
                "pointSize": 5,
                "scaleDistribution": { "type": "linear" },
                "showPoints": "never",
                "spanNulls": false,
                "stacking": { "group": "A", "mode": "none" },
                "thresholdsStyle": { "mode": "line" }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "green", "value": null },
                  { "color": "red", "value": 0.05 }
                ]
              },
              "unit": "percentunit"
            },
            "overrides": []
          },
          "gridPos": { "h": 6, "w": 8, "x": 8, "y": 17 },
          "id": 302,
          "options": {
            "legend": { "calcs": ["mean", "max"], "displayMode": "table", "placement": "bottom", "showLegend": true },
            "tooltip": { "mode": "multi", "sort": "desc" }
          },
          "targets": [
            {
              "datasource": { "type": "prometheus", "uid": "Prometheus" },
              "expr": "(sum by (service_name) (rate(http_requests_total{http_status_code=~\"5..\"}[5m])) / sum by (service_name) (rate(http_requests_total[5m]))) or (sum by (service_name) (rate(http_server_request_duration_seconds_count{http_response_status_code=~\"5..\"}[5m])) / sum by (service_name) (rate(http_server_request_duration_seconds_count[5m])))",
              "legendFormat": "{{service_name}}",
              "refId": "A"
            }
          ],
          "title": "Error Rate by Service",
          "type": "timeseries"
        },
        {
          "datasource": { "type": "prometheus", "uid": "Prometheus" },
          "description": "Traffic distribution across services (SDK + Beyla)",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "palette-classic" },
              "custom": { "hideFrom": { "tooltip": false, "viz": false, "legend": false } },
              "mappings": []
            },
            "overrides": []
          },
          "gridPos": { "h": 6, "w": 8, "x": 16, "y": 17 },
          "id": 303,
          "options": {
            "displayLabels": ["percent"],
            "legend": { "displayMode": "table", "placement": "right", "showLegend": true, "values": ["value", "percent"] },
            "pieType": "donut",
            "reduceOptions": { "values": false, "calcs": ["lastNotNull"], "fields": "" },
            "tooltip": { "mode": "multi", "sort": "desc" }
          },
          "targets": [
            {
              "datasource": { "type": "prometheus", "uid": "Prometheus" },
              "expr": "sum by (service_name) (rate(http_requests_total[5m])) or sum by (service_name) (rate(http_server_request_duration_seconds_count[5m]))",
              "legendFormat": "{{service_name}}",
              "refId": "A"
            }
          ],
          "title": "Traffic Distribution by Service",
          "type": "piechart"
        },
        {
          "collapsed": false,
          "gridPos": { "h": 1, "w": 24, "x": 0, "y": 23 },
          "id": 400,
          "panels": [],
          "title": "Platform Performance Trends",
          "type": "row"
        },
        {
          "datasource": { "type": "prometheus", "uid": "Prometheus" },
          "description": "Request throughput per service over time (SDK + Beyla)",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "palette-classic" },
              "custom": {
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 25,
                "gradientMode": "opacity",
                "hideFrom": { "tooltip": false, "viz": false, "legend": false },
                "lineInterpolation": "smooth",
                "lineWidth": 2,
                "pointSize": 5,
                "scaleDistribution": { "type": "linear" },
                "showPoints": "never",
                "spanNulls": false,
                "stacking": { "group": "A", "mode": "normal" },
                "thresholdsStyle": { "mode": "off" }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [ { "color": "green", "value": null } ]
              },
              "unit": "reqps"
            },
            "overrides": []
          },
          "gridPos": { "h": 8, "w": 12, "x": 0, "y": 24 },
          "id": 401,
          "options": {
            "legend": { "calcs": ["mean", "max"], "displayMode": "table", "placement": "bottom", "showLegend": true },
            "tooltip": { "mode": "multi", "sort": "desc" }
          },
          "targets": [
            {
              "datasource": { "type": "prometheus", "uid": "Prometheus" },
              "expr": "sum by (service_name) (rate(http_requests_total[5m])) or sum by (service_name) (rate(http_server_request_duration_seconds_count[5m]))",
              "legendFormat": "{{service_name}}",
              "refId": "A"
            }
          ],
          "title": "Request Throughput by Service",
          "type": "timeseries"
        },
        {
          "datasource": { "type": "prometheus", "uid": "Prometheus" },
          "description": "P50, P95, P99 response latency trends (SDK in ms, Beyla converted to ms)",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "palette-classic" },
              "custom": {
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 10,
                "gradientMode": "scheme",
                "hideFrom": { "tooltip": false, "viz": false, "legend": false },
                "lineInterpolation": "smooth",
                "lineWidth": 2,
                "pointSize": 5,
                "scaleDistribution": { "type": "linear" },
                "showPoints": "never",
                "spanNulls": false,
                "stacking": { "group": "A", "mode": "none" },
                "thresholdsStyle": { "mode": "dashed" }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "green", "value": null },
                  { "color": "red", "value": 500 }
                ]
              },
              "unit": "ms"
            },
            "overrides": [
              {
                "matcher": { "id": "byRegexp", "options": "^P99.*" },
                "properties": [
                  { "id": "custom.lineStyle", "value": { "fill": "dash", "dash": [10, 10] } },
                  { "id": "custom.fillOpacity", "value": 0 }
                ]
              }
            ]
          },
          "gridPos": { "h": 8, "w": 12, "x": 12, "y": 24 },
          "id": 402,
          "options": {
            "legend": { "calcs": ["mean", "max", "lastNotNull"], "displayMode": "table", "placement": "bottom", "showLegend": true },
            "tooltip": { "mode": "multi", "sort": "desc" }
          },
          "targets": [
            {
              "datasource": { "type": "prometheus", "uid": "Prometheus" },
              "expr": "histogram_quantile(0.50, sum(rate(http_server_duration_milliseconds_bucket[5m])) by (le))",
              "legendFormat": "P50 SDK (median)",
              "refId": "A"
            },
            {
              "datasource": { "type": "prometheus", "uid": "Prometheus" },
              "expr": "histogram_quantile(0.95, sum(rate(http_server_duration_milliseconds_bucket[5m])) by (le))",
              "legendFormat": "P95 SDK",
              "refId": "B"
            },
            {
              "datasource": { "type": "prometheus", "uid": "Prometheus" },
              "expr": "histogram_quantile(0.99, sum(rate(http_server_duration_milliseconds_bucket[5m])) by (le))",
              "legendFormat": "P99 SDK",
              "refId": "C"
            },
            {
              "datasource": { "type": "prometheus", "uid": "Prometheus" },
              "expr": "histogram_quantile(0.50, sum(rate(http_server_request_duration_seconds_bucket[5m])) by (le)) * 1000",
              "legendFormat": "P50 Beyla (median)",
              "refId": "D"
            },
            {
              "datasource": { "type": "prometheus", "uid": "Prometheus" },
              "expr": "histogram_quantile(0.95, sum(rate(http_server_request_duration_seconds_bucket[5m])) by (le)) * 1000",
              "legendFormat": "P95 Beyla",
              "refId": "E"
            },
            {
              "datasource": { "type": "prometheus", "uid": "Prometheus" },
              "expr": "histogram_quantile(0.99, sum(rate(http_server_request_duration_seconds_bucket[5m])) by (le)) * 1000",
              "legendFormat": "P99 Beyla",
              "refId": "F"
            }
          ],
          "title": "Response Latency Percentiles",
          "type": "timeseries"
        },
        {
          "collapsed": false,
          "gridPos": { "h": 1, "w": 24, "x": 0, "y": 32 },
          "id": 500,
          "panels": [],
          "title": "HTTP Status Code Analysis",
          "type": "row"
        },
        {
          "datasource": { "type": "prometheus", "uid": "Prometheus" },
          "description": "Distribution of HTTP response codes across all services (SDK + Beyla with unified labels)",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "palette-classic" },
              "custom": {
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "bars",
                "fillOpacity": 80,
                "gradientMode": "none",
                "hideFrom": { "tooltip": false, "viz": false, "legend": false },
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": { "type": "linear" },
                "showPoints": "never",
                "spanNulls": false,
                "stacking": { "group": "A", "mode": "normal" },
                "thresholdsStyle": { "mode": "off" }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [ { "color": "green", "value": null } ]
              },
              "unit": "reqps"
            },
            "overrides": [
              {
                "matcher": { "id": "byRegexp", "options": "^2.." },
                "properties": [ { "id": "color", "value": { "fixedColor": "#37872D", "mode": "fixed" } } ]
              },
              {
                "matcher": { "id": "byRegexp", "options": "^4.." },
                "properties": [ { "id": "color", "value": { "fixedColor": "#FF9830", "mode": "fixed" } } ]
              },
              {
                "matcher": { "id": "byRegexp", "options": "^5.." },
                "properties": [ { "id": "color", "value": { "fixedColor": "#F2495C", "mode": "fixed" } } ]
              }
            ]
          },
          "gridPos": { "h": 7, "w": 12, "x": 0, "y": 33 },
          "id": 501,
          "options": {
            "legend": { "calcs": ["sum"], "displayMode": "table", "placement": "right", "showLegend": true },
            "tooltip": { "mode": "multi", "sort": "desc" }
          },
          "targets": [
            {
              "datasource": { "type": "prometheus", "uid": "Prometheus" },
              "expr": "sum by (http_status_code) (rate(http_requests_total[5m])) or sum by (http_status_code) (label_replace(rate(http_server_request_duration_seconds_count[5m]), \"http_status_code\", \"$1\", \"http_response_status_code\", \"(.+)\"))",
              "legendFormat": "{{http_status_code}}",
              "refId": "A"
            }
          ],
          "title": "HTTP Status Codes Over Time",
          "type": "timeseries"
        },
        {
          "datasource": { "type": "prometheus", "uid": "Prometheus" },
          "description": "Per-service request rate and health details (SDK + Beyla)",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "thresholds" },
              "custom": {
                "align": "center",
                "cellOptions": { "type": "auto" },
                "inspect": false
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [ { "color": "green", "value": null } ]
              }
            },
            "overrides": [
              {
                "matcher": { "id": "byName", "options": "Error Rate" },
                "properties": [
                  { "id": "unit", "value": "percentunit" },
                  { "id": "custom.cellOptions", "value": { "type": "color-background" } },
                  { "id": "thresholds", "value": { "mode": "absolute", "steps": [ { "color": "green", "value": null }, { "color": "#EAB839", "value": 0.01 }, { "color": "red", "value": 0.05 } ] } }
                ]
              },
              {
                "matcher": { "id": "byName", "options": "Req/s" },
                "properties": [
                  { "id": "unit", "value": "reqps" },
                  { "id": "decimals", "value": 2 }
                ]
              },
              {
                "matcher": { "id": "byName", "options": "P95 Latency (ms)" },
                "properties": [
                  { "id": "unit", "value": "ms" },
                  { "id": "decimals", "value": 0 },
                  { "id": "custom.cellOptions", "value": { "type": "color-background" } },
                  { "id": "thresholds", "value": { "mode": "absolute", "steps": [ { "color": "green", "value": null }, { "color": "#EAB839", "value": 200 }, { "color": "red", "value": 500 } ] } }
                ]
              },
              {
                "matcher": { "id": "byName", "options": "Instrumentation" },
                "properties": [
                  { "id": "custom.cellOptions", "value": { "type": "color-text" } },
                  { "id": "mappings", "value": [ { "options": { "SDK": { "color": "#37872D", "index": 0, "text": "SDK" }, "eBPF": { "color": "#8F3BB8", "index": 1, "text": "eBPF (Beyla)" } }, "type": "value" } ] }
                ]
              }
            ]
          },
          "gridPos": { "h": 7, "w": 12, "x": 12, "y": 33 },
          "id": 502,
          "options": {
            "cellHeight": "md",
            "footer": { "fields": "", "reducer": ["sum"], "show": false },
            "showHeader": true
          },
          "targets": [
            {
              "datasource": { "type": "prometheus", "uid": "Prometheus" },
              "expr": "sum by (service_name) (rate(http_requests_total[5m])) or sum by (service_name) (rate(http_server_request_duration_seconds_count[5m]))",
              "format": "table",
              "instant": true,
              "refId": "A"
            },
            {
              "datasource": { "type": "prometheus", "uid": "Prometheus" },
              "expr": "(sum by (service_name) (rate(http_requests_total{http_status_code=~\"5..\"}[5m])) / sum by (service_name) (rate(http_requests_total[5m]))) or (sum by (service_name) (rate(http_server_request_duration_seconds_count{http_response_status_code=~\"5..\"}[5m])) / sum by (service_name) (rate(http_server_request_duration_seconds_count[5m])))",
              "format": "table",
              "instant": true,
              "refId": "B"
            },
            {
              "datasource": { "type": "prometheus", "uid": "Prometheus" },
              "expr": "histogram_quantile(0.95, sum(rate(http_server_duration_milliseconds_bucket[5m])) by (le, service_name)) or histogram_quantile(0.95, sum(rate(http_server_request_duration_seconds_bucket[5m])) by (le, service_name)) * 1000",
              "format": "table",
              "instant": true,
              "refId": "C"
            }
          ],
          "title": "Service Performance Summary",
          "transformations": [
            { "id": "merge", "options": {} },
            {
              "id": "organize",
              "options": {
                "excludeByName": { "Time": true, "le": true },
                "indexByName": { "service_name": 0, "Value #A": 1, "Value #B": 2, "Value #C": 3 },
                "renameByName": { "Value #A": "Req/s", "Value #B": "Error Rate", "Value #C": "P95 Latency (ms)", "service_name": "Service" }
              }
            }
          ],
          "type": "table"
        },
        {
          "collapsed": false,
          "gridPos": { "h": 1, "w": 24, "x": 0, "y": 40 },
          "id": 600,
          "panels": [],
          "title": "Instrumentation Comparison",
          "type": "row"
        },
        {
          "datasource": { "type": "prometheus", "uid": "Prometheus" },
          "description": "Number of services instrumented via OpenTelemetry SDK (manual instrumentation)",
          "fieldConfig": {
            "defaults": {
              "color": { "fixedColor": "#37872D", "mode": "fixed" },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "#37872D", "value": null }
                ]
              },
              "unit": "short"
            },
            "overrides": []
          },
          "gridPos": { "h": 6, "w": 6, "x": 0, "y": 41 },
          "id": 601,
          "options": {
            "colorMode": "background",
            "graphMode": "none",
            "justifyMode": "auto",
            "orientation": "auto",
            "reduceOptions": { "values": false, "calcs": ["lastNotNull"], "fields": "" },
            "text": { "valueSize": 48 },
            "textMode": "value_and_name"
          },
          "targets": [
            {
              "datasource": { "type": "prometheus", "uid": "Prometheus" },
              "expr": "count(count by (service_name) (http_requests_total))",
              "legendFormat": "SDK Services",
              "refId": "A"
            }
          ],
          "title": "SDK Instrumented Services",
          "type": "stat"
        },
        {
          "datasource": { "type": "prometheus", "uid": "Prometheus" },
          "description": "Number of services auto-instrumented via Beyla eBPF",
          "fieldConfig": {
            "defaults": {
              "color": { "fixedColor": "#8F3BB8", "mode": "fixed" },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "#8F3BB8", "value": null }
                ]
              },
              "unit": "short"
            },
            "overrides": []
          },
          "gridPos": { "h": 6, "w": 6, "x": 6, "y": 41 },
          "id": 602,
          "options": {
            "colorMode": "background",
            "graphMode": "none",
            "justifyMode": "auto",
            "orientation": "auto",
            "reduceOptions": { "values": false, "calcs": ["lastNotNull"], "fields": "" },
            "text": { "valueSize": 48 },
            "textMode": "value_and_name"
          },
          "targets": [
            {
              "datasource": { "type": "prometheus", "uid": "Prometheus" },
              "expr": "count(count by (service_name) (http_server_request_duration_seconds_count{otel_scope_name=~\".*beyla.*\"}))",
              "legendFormat": "eBPF Services",
              "refId": "A"
            }
          ],
          "title": "eBPF Auto-Instrumented Services",
          "type": "stat"
        },
        {
          "datasource": { "type": "prometheus", "uid": "Prometheus" },
          "description": "Side-by-side comparison of request rates from SDK-instrumented vs Beyla eBPF auto-instrumented services",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "palette-classic" },
              "custom": {
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 25,
                "gradientMode": "opacity",
                "hideFrom": { "tooltip": false, "viz": false, "legend": false },
                "lineInterpolation": "smooth",
                "lineWidth": 2,
                "pointSize": 5,
                "scaleDistribution": { "type": "linear" },
                "showPoints": "never",
                "spanNulls": false,
                "stacking": { "group": "A", "mode": "none" },
                "thresholdsStyle": { "mode": "off" }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [ { "color": "green", "value": null } ]
              },
              "unit": "reqps"
            },
            "overrides": [
              {
                "matcher": { "id": "byRegexp", "options": "^SDK.*" },
                "properties": [
                  { "id": "color", "value": { "fixedColor": "#37872D", "mode": "fixed" } }
                ]
              },
              {
                "matcher": { "id": "byRegexp", "options": "^Beyla.*" },
                "properties": [
                  { "id": "color", "value": { "fixedColor": "#8F3BB8", "mode": "fixed" } }
                ]
              }
            ]
          },
          "gridPos": { "h": 6, "w": 12, "x": 12, "y": 41 },
          "id": 603,
          "options": {
            "legend": { "calcs": ["mean", "max", "lastNotNull"], "displayMode": "table", "placement": "bottom", "showLegend": true },
            "tooltip": { "mode": "multi", "sort": "desc" }
          },
          "targets": [
            {
              "datasource": { "type": "prometheus", "uid": "Prometheus" },
              "expr": "sum by (service_name) (rate(http_requests_total[5m]))",
              "legendFormat": "SDK - {{service_name}}",
              "refId": "A"
            },
            {
              "datasource": { "type": "prometheus", "uid": "Prometheus" },
              "expr": "sum by (service_name) (rate(http_server_request_duration_seconds_count[5m]))",
              "legendFormat": "Beyla - {{service_name}}",
              "refId": "B"
            }
          ],
          "title": "Request Rate: SDK vs Beyla eBPF",
          "type": "timeseries"
        }
      ],
      "refresh": "10s",
      "schemaVersion": 38,
      "style": "dark",
      "tags": ["executive", "business", "c-level", "kpi", "opentelemetry", "beyla", "ebpf"],
      "templating": { "list": [] },
      "time": { "from": "now-1h", "to": "now" },
      "timepicker": {},
      "timezone": "",
      "title": "Executive Dashboard - Platform Reliability",
      "uid": "executive-dashboard",
      "version": 1,
      "weekStart": ""
    }
